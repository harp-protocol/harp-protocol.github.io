---
import { getEntry } from "astro:content";
import Button from "./user-components/Button.astro";
import Section from "./Section.astro";

const locale = Astro.currentLocale || "en";

const cta = await getEntry(
  "ctaSection",
  `${locale === "en" ? "" : `${locale}/`}call-to-action`
);
const { title, description, enable, fill_button, outline_button } =
  cta?.data ?? {};
---

{
  enable && (
    <div class="cta-container">
      <Section title={title} description={description}>
        {fill_button?.enable && (
          <Button
            label={fill_button.label || "Get Started"}
            link={fill_button.link || "/getting-started/introduction/overview/"}
            variant="primary"
          />
        )}
        {outline_button?.enable && (
          <Button
            label={outline_button.label || "Get a live demo"}
            link={
              outline_button.link || "/getting-started/introduction/overview/"
            }
            variant="outline-primary"
          />
        )}
      </Section>
    </div>
  )
}

<style>
  .cta-container {
    padding: 1rem;
    position: relative;
  }

  /* Light mode */
  :global([data-theme="light"]) .cta-container {
    background:
      radial-gradient(ellipse 50% 60% at 50% 40%, rgba(49, 151, 149, 0.08) 0%, transparent 70%),
      linear-gradient(180deg, #F7FAFC 0%, #EDF2F7 50%, #F7FAFC 100%);
  }

  /* Dark mode */
  :global([data-theme="dark"]) .cta-container {
    background:
      radial-gradient(ellipse 60% 50% at 30% 30%, rgba(77, 201, 176, 0.1) 0%, transparent 60%),
      radial-gradient(ellipse 50% 40% at 70% 60%, rgba(49, 151, 149, 0.06) 0%, transparent 50%),
      linear-gradient(180deg, #171923 0%, #1A202C 50%, #171923 100%);
  }
</style>

<script>
  const ctaContainerButton = document.querySelector(".cta-container a");

  const buttonParent = ctaContainerButton?.parentElement;

  if (buttonParent) {
    buttonParent.style.display = "flex";
    buttonParent.style.justifyContent = "center";
    buttonParent.style.gap = "1rem";
  }
</script>
